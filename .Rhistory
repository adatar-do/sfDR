"1401", 	"Nagua",
"1402", 	"Cabrera",
"1403", 	"El Factor",
"1404", 	"Río San Juan",
"1501", 	"Monte Cristi",
"1502", 	"Castañuelas",
"1503", 	"Guayubín",
"1504", 	"Las Matas de Santa Cruz",
"1504", 	"Las Matas",
"1505", 	"Pepillo Salcedo",
"1506", 	"Villa Vásquez",
"1601", 	"Pedernales",
"1602", 	"Oviedo",
"1701", 	"Baní",
"1702", 	"Nizao",
"1703", 	"Matanzas",
"1801", 	"Puerto Plata",
"1802", 	"Altamira",
"1803", 	"Guananico",
"1804", 	"Imbert",
"1805", 	"Los Hidalgos",
"1806", 	"Luperón",
"1807", 	"Sosúa",
"1808", 	"Villa Isabela",
"1809", 	"Villa Montellano",
"1901", 	"Salcedo",
"1902", 	"Tenares",
"1903", 	"Villa Tapia",
"2001", 	"Samaná",
"2001", 	"Santa Barbara de Samaná",
"2002", 	"Sánchez",
"2003", 	"Las Terrenas",
"2101", 	"San Cristóbal",
"2102", 	"Sabana Grande de Palenque",
"2102", 	"Palenque",
"2103", 	"Bajos de Haina",
"2103", 	"Haina",
"2104", 	"Cambita Garabitos",
"2105", 	"Villa Altagracia",
"2106", 	"Yaguate",
"2107", 	"San Gregorio de Nigua",
"2108", 	"Los Cacaos",
"2201", 	"San Juan",
"2201", 	"San Juan de la Maguana",
"2202", 	"Bohechío",
"2203", 	"El Cercado",
"2204", 	"Juan de Herrera",
"2205", 	"Las Matas de Farfán",
"2206", 	"Vallejuelo",
"2301", 	"San Pedro de Macorís",
"2302", 	"Los Llanos",
"2302", 	"San José de los Llanos",
"2303", 	"Ramón Santana",
"2304", 	"Consuelo",
"2305", 	"Quisqueya",
"2306", 	"Guayacanes",
"2401", 	"Cotuí",
"2402", 	"Cevicos",
"2403", 	"Fantino",
"2404", 	"Villa La Mata",
"2404", 	"La Mata",
"2501", 	"Santiago",
"2501", 	"Santiago de los Caballeros",
"2502", 	"Bisonó",
"2502", 	"Villa Bisonó",
"2503", 	"Jánico",
"2504", 	"Licey al Medio",
"2505", 	"San José de las Matas",
"2506", 	"Tamboril",
"2507", 	"Villa González",
"2508", 	"Puñal",
"2509", 	"Sabana Iglesia",
"2510", 	"Baitoa",
"2601", 	"San Ignacio de Sabaneta",
"2602", 	"Villa Los Almácigos",
"2603", 	"Monción",
"2701", 	"Mao",
"2701", 	"Santa Cruz de Mao",
"2702", 	"Esperanza",
"2703", 	"Laguna Salada",
"2801", 	"Bonao",
"2802", 	"Maimón",
"2803", 	"Piedra Blanca",
"2901", 	"Monte Plata",
"2902", 	"Bayaguana",
"2903", 	"Sabana Grande de Boyá",
"2904", 	"Yamasá",
"2905", 	"Peralvillo",
"3001", 	"Hato Mayor",
"3002", 	"Sabana de la Mar",
"3003", 	"El Valle",
"3101", 	"San José de Ocoa",
"3102", 	"Sabana Larga",
"3103", 	"Rancho Arriba",
"3201", 	"Santo Domingo Este",
"3202", 	"Santo Domingo Oeste",
"3203", 	"Santo Domingo Norte",
"3204", 	"Boca Chica",
"3205", 	"San Antonio de Guerra",
"3206", 	"Los Alcarrizos",
"3207", 	"Pedro Brand"
)
DR_MUN <- sf::st_read("data-raw/shapes/RD_MUN_20211130/RD_MUN_20211130.shp", quiet = TRUE) %>%
dplyr::select(MUN_ID = ENLACE)
usethis::use_data(DR_MUN, overwrite = TRUE)
library(sf)
library(dplyr)
library(tidyr)
source("data-raw/division_territorial/dt_2016.R")
dt_2016 %>%
filter(
municipio != "00",
distrito_municipal != "00",
seccion == "00",
barrio_paraje == "000",
sub_barrio == "00"
) %>%
select(provincia, municipio, distrito_municipal, DM_NAME = toponimia_o_nombre) %>%
unite("DM_ID", c(provincia, municipio, distrito_municipal), sep = "") -> dr_dm
source("data-raw/division_territorial/dt_2016.R")
dt_2016 %>%
filter(
municipio != "00",
distrito_municipal != "00",
seccion == "00",
barrio_paraje == "000",
sub_barrio == "00"
) %>%
select(provincia, municipio, distrito_municipal, DM_NAME = toponimia_o_nombre) %>%
unite("DM_ID", c(provincia, municipio, distrito_municipal), sep = "") -> dr_dm
View(dr_dm)
dr_dm %>%
count(DM_NAME) %>%
arrange(desc(n))
DR_DM <- sf::st_read("data-raw/shapes/RD_DM_20211130/RD_DM_20211130.shp")
DR_DM %>%
st_drop_geometry() %>%
left_join(dr_dm, by = c("ENLACE" = "DM_ID")) %>%
View()
DR_DM %>%
st_drop_geometry() %>%
left_join(dr_dm, by = c("ENLACE" = "DM_ID")) %>%
View()
View(dr_dm)
DR_DM %>%
st_drop_geometry() %>%
select(DM_ID = ENLACE, DM_NAME = TOPO2) %>%
as_tibble() %>%
arrange(DM_ID) -> dr_dm
View(dr_dm)
dr_dm <- dr_dm %>%
dplyr::bind_rows(
dplyr::tribble(
~"DM_ID", ~"DM_NAME",
"000000", "_NA_",
"020107", "Doña Emma Balaguer",
"040901", "Salinas",
"060701", "Hostos",
"110102", "Nisibón",
"110201", "Yuma"
)
)
DR_DM %>%
select(DM_ID = ENLACE) -> DR_DM
View(DR_DM)
dr_dm
dr_dm
library(magrittr)
dr_region <- tibble::tribble(
~REG_ID, ~REG_NAME,
"01", "Cibao Norte",
"02", "Cibao Sur",
"03", "Cibao Nordeste",
"04", "Cibao Noroeste",
"05", "Valdesia",
"06", "El Valle",
"07", "Enriquillo",
"08", "Del Yuma",
"09", "Higuamo",
"10", "Ozama"
)
DR_REG <- sf::st_read("data-raw/shapes/RD_REG_20211130/RD_REG_20211130.shp", quiet = TRUE)
DR_REG %>%
dplyr::left_join(dr_region, ., by = c("REG_ID" = "CODREG")) %>%
sf::st_as_sf() %>%
dplyr::select(REG_ID) -> DR_REG
dr_region
DR_REG
usethis::use_data(DR_REG, dr_region, overwrite = TRUE)
usethis::use_data(dr_province, DR_PROV, overwrite = TRUE)
usethis::use_data(dr_munipality, DR_MUN, overwrite = TRUE)
usethis::use_data(dr_dm, DR_DM, overwrite = TRUE)
dr_dm
DR_DM
dt_2016 %>%
filter(
seccion != "00",
barrio_paraje == "000",
sub_barrio == "00"
) %>%
select(provincia, municipio, distrito_municipal, seccion, SEC_NAME = toponimia_o_nombre) %>%
unite("SEC_ID", c(provincia, municipio, distrito_municipal, seccion), sep = "") -> dr_sec
dr_sec
dr_sec %>%
count(SEC_NAME) %>%
arrange(desc(n))
DR_SEC <- sf::st_read("data-raw/shapes/ShapeFilesCenso2010/SECCenso2010.shp")
dr_sec <- dr_sec %>%
dplyr::bind_rows(
dplyr::tribble(
~"SEC_ID", ~"SEC_NAME",
"00000000", "_NA_",
"02010701", "Doña Emma Balaguer",
"02010101", "Azua",
"03020103", "El Rodeo",
"03020103", "Majagual",
"22010804", "El Cerro",
"07050105", "Nicolás",
)
)
dr_sec <- dplyr::distinct(dr_sec)
DR_SEC %>%
mutate(SEC_ID = stringr::str_c(PROV, MUN, DM, SECC)) %>% select(SEC_ID) -> DR_SEC
usethis::use_data(dr_sec, DR_SEC, overwrite = TRUE)
devtools::load_all(".")
sfDR::library.dynam.unload()
install.packages("~/Projects/Adatar/sfDR_0.0.0.9000.tar.gz", repos = NULL, type = "source")
devtools::load_all(".")
dr_province
dr_province$PROV_NAME
dr_province$PROV_NAME %>% clipr::write_clip()
library(magrittr)
dr_province$PROV_NAME %>% clipr::write_clip()
dr_munipality$MUN_NAME
dr_munipality$MUN_NAME %>% clipr::write_clip()
devtools::load_all(".")
dr_munipality
devtools::load_all(".")
devtools::load_all(".")
sfDR::dr_province
sfDR::DR_PROV
sfDR::DR_PROV %>% class()
library(dplyr)
sfDR::DR_PROV %>% class()
install.packages("geojsonsf")
sfDR::DR_PROV %>% geojsonsf::sf_geojson()
sfDR::DR_PROV %>% geojsonsf::sf_geojson() %>% jsonlite::write_json('dr_prov.json')
usethis::use_r('region')
load("~/Projects/Adatar/sfDR/data/DR_REG.rda")
View(DR_REG)
DR_REG
rlang::last_trace()
load("~/Projects/Adatar/sfDR/data/dr_region.rda")
View(dr_region)
usethis::use_r('province')
usethis::use_r('municipality')
usethis::use_r('dm')
usethis::use_r('sec')
load("~/Projects/Adatar/sfDR/data/dr_dm.rda")
View(DR_DM)
usethis::use_mit_license()
View(DR_REG)
View(DR_DM)
View(dr_region)
View(DR_DM)
load("~/Projects/Adatar/sfDR/data/dr_sec.rda")
source("~/Projects/Adatar/sfDR/data-raw/dr_sections.R", echo=TRUE)
source("~/Projects/Adatar/sfDR/data-raw/dr_sections.R", echo=TRUE)
source("~/Projects/Adatar/sfDR/data-raw/dr_region.R", echo=TRUE)
source("~/Projects/Adatar/sfDR/data-raw/dr_region.R", echo=TRUE)
source("~/Projects/Adatar/sfDR/data-raw/dr_provinces.R", echo=TRUE)
source("~/Projects/Adatar/sfDR/data-raw/dr_municipalities.R", echo=TRUE)
source("~/Projects/Adatar/sfDR/data-raw/dr_dm.R", echo=TRUE)
devtools::load_all(".")
devtools::load_all(".")
source("~/Projects/Adatar/sfDR/data-raw/dr_municipalities.R", echo=TRUE)
library(dplyr)
source("~/Projects/Adatar/sfDR/data-raw/dr_municipalities.R", echo=TRUE)
source("~/Projects/Adatar/sfDR/data-raw/dr_municipalities.R", echo=TRUE)
source("~/Projects/Adatar/sfDR/data-raw/dr_dm.R", echo=TRUE)
load("~/Projects/Adatar/sfDR/data/dr_municipal_district.rda")
View(dr_municipal_district)
source("~/Projects/Adatar/sfDR/data-raw/dr_dm.R", echo=TRUE)
load("~/Projects/Adatar/sfDR/data/dr_municipal_district.rda")
View(dr_municipal_district)
usethis::use_readme_rmd()
source("~/.active-rstudio-document", echo=TRUE)
library(sf)
library(dplyr)
dr_province <- dplyr::tribble(
~PROV_CODE, ~PROV_NAME, ~PROV_ID,
"NA", "_NA_", "00",
"DN", "Distrito Nacional", "01",
"AZU", "Azua", "02",
"BAH", "Baoruco", "03",
"BAH", "Bahoruco", "03",
"BAR", "Barahona", "04",
"DAJ", "Dajabón", "05",
"DUA", "Duarte", "06",
"EP", "Elías Piña", "07",
"ES", "El Seibo", "08",
"ES", "El Seybo", "08",
"ESP", "Espaillat", "09",
"IND", "Independencia", "10",
"LA", "La Altagracia", "11",
"LR", "La Romana", "12",
"LV", "La Vega", "13",
"MTS", "María Trinidad Sánchez", "14",
"MC", "Monte Cristi", "15",
"PED", "Pedernales", "16",
"PER", "Peravia", "17",
"PP", "Puerto Plata", "18",
"HMI", "Hermanas Mirabal", "19",
"SAL", "Salcedo", "19",
"SAM", "Samaná", "20",
"SC", "San Cristóbal", "21",
"SJ", "San Juan", "22",
"SJ", "San Juan de la Maguana", "22",
"SPM", "San Pedro de Macorís", "23",
"SRA", "Sánchez Ramírez", "24",
"SAN", "Santiago", "25",
"SAN", "Santiago de los Caballeros", "25",
"SRO", "Santiago Rodríguez", "26",
"VAL", "Valverde", "27",
"MN", "Monseñor Nouel", "28",
"MP", "Monte Plata", "29",
"HMA", "Hato Mayor", "30",
"SJO", "San José de Ocoa", "31",
"SD", "Santo Domingo", "32"
) %>%
dplyr::relocate(PROV_ID, PROV_CODE, PROV_NAME)
dr_province <- dr_province %>%
dplyr::mutate(PROV_NAME = iconv(PROV_NAME, from = "latin1", to = "UTF-8"))
dr_province
DR_PROV <- sf::st_read("data-raw/shapes/RD_PROV_20211130/RD_PROV_20211130.shp", quiet = TRUE)
DR_PROV <- dplyr::select(DR_PROV, PROV_ID = PROV)
usethis::use_data(dr_province, DR_PROV, overwrite = TRUE)
source("~/Projects/Adatar/sfDR/data-raw/dr_provinces.R")
library(sf)
library(dplyr)
library(tidyr)
source("data-raw/division_territorial/dt_2016.R")
dt_2016 %>%
filter(
municipio != "00",
distrito_municipal != "00",
seccion == "00",
barrio_paraje == "000",
sub_barrio == "00"
) %>%
select(provincia, municipio, distrito_municipal, DM_NAME = toponimia_o_nombre) %>%
unite("DM_ID", c(provincia, municipio, distrito_municipal), sep = "") -> dr_dm
dr_dm %>%
count(DM_NAME) %>%
arrange(desc(n))
DR_DM <- sf::st_read("data-raw/shapes/RD_DM_20211130/RD_DM_20211130.shp")
DR_DM %>%
st_drop_geometry() %>%
left_join(dr_dm, by = c("ENLACE" = "DM_ID")) %>%
View()
DR_DM %>%
st_drop_geometry() %>%
count(ENLACE) %>%
arrange(desc(n))
DR_DM %>%
st_drop_geometry() %>%
select(DM_ID = ENLACE, DM_NAME = TOPO2) %>%
as_tibble() %>%
arrange(DM_ID) -> dr_dm
dr_municipal_district <- dr_dm %>%
dplyr::bind_rows(
dplyr::tribble(
~"DM_ID", ~"DM_NAME",
"000000", "_NA_",
"020107", "Doña Emma Balaguer",
"040901", "Salinas",
"060701", "Hostos",
"110102", "Nisibón",
"110201", "Yuma"
)
)
dr_municipal_district <- dr_municipal_district %>%
dplyr::mutate(DM_NAME = iconv(DM_NAME, from = "latin1", to = "UTF-8"))
dr_municipal_district
source("~/Projects/Adatar/sfDR/data-raw/dr_dm.R")
source("~/Projects/Adatar/sfDR/data-raw/dr_municipalities.R")
source("~/Projects/Adatar/sfDR/data-raw/dr_sections.R")
devtools::load_all(".")
plot(DR_PROV)
usethis::use_pkgdown()
pkgdown::build_site()
pkgdown::build_site()
pkgdown::build_site()
pkgdown::build_site()
usethis::use_pkgdown_github_pages()
install.packages('sfDR', repos = c('https://adatar-do.r-universe.dev', 'https://cloud.r-project.org'))
readxl::read_excel('Remesas_PR.xlsx')
readxl::read_excel('data-raw/Remesas_PR.xlsx')
readxl::read_excel('data-raw/Remesas_PR.xlsx', skip = 6)
readxl::read_excel('data-raw/Remesas_PR.xlsx', skip = 6) %>%
dplyr::select(1:2)
library(dplyr)
readxl::read_excel('data-raw/Remesas_PR.xlsx', skip = 6) %>%
select(1:2)
library(tidyr)
readxl::read_excel('data-raw/Remesas_PR.xlsx', skip = 6) %>%
select(1:2)
readxl::read_excel('data-raw/Remesas_PR.xlsx', skip = 6) %>%
select(1:2) %>%
drop_na()
readxl::read_excel('data-raw/Remesas_PR.xlsx', skip = 6) %>%
select(1:2) %>%
drop_na() %>%
setNames(c('provincia', 'porcentaje'))
readxl::read_excel('data-raw/Remesas_PR.xlsx', skip = 6) %>%
select(1:2) %>%
drop_na() %>%
setNames(c('provincia', 'porcentaje')) %>%
filter(porcentaje != 1)
remesas_provincias <- readxl::read_excel('data-raw/Remesas_PR.xlsx', skip = 6) %>%
select(1:2) %>%
drop_na() %>%
setNames(c('provincia', 'porcentaje')) %>%
filter(porcentaje != 1)
usethis::use_data(remesas_provincias)
devtools::load_all(".")
DR_PROV
plot(DR_PROV)
library(sfDR)
DR_PROV_SF <- sf::st_as_sf(DR_PROV)
# Plotting the map of a specific province
plot(DR_PROV_SF)
DR_PROV_SF
DR_PROV_SF |>
dplyr::left_join(sfDR::remesas_provincias)
DR_PROV_SF |>
left_join(remesas_provincias, by = join_by('province' = 'PROV_NAME'))
DR_PROV_SF |>
left_join(remesas_provincias, by = join_by('PROV_NAME' = 'province'))
DR_PROV_SF |>
left_join(remesas_provincias, by = join_by('PROV_NAME' == 'province'))
DR_PROV_SF |> sf::st_drop_geometry()
library(dplyr)
DR_PROV_SF |> sf::st_drop_geometry() |>
left_join(dr_province)
.res <- DR_PROV_SF |> sf::st_drop_geometry()
.res |>
left_join(dr_province)
.res |>
left_join(dr_province, by = join_by(PROV_ID)) |>
left_join(remesas_provincias, by = join_by('PROV_NAME' == 'province'))
remesas_provincias
source("C:/Users/drdsd/Documents/Projects/Adatar/sfDR/data-raw/remesas_provincias.R")
remesas_provincias
quarto::quarto_preview_stop()
remesas_provincias <- readxl::read_excel('data-raw/Remesas_PR.xlsx', skip = 6) %>%
select(1:2) %>%
drop_na() %>%
setNames(c('province', 'percentage')) %>%
filter(percentage != 1)
source("C:/Users/drdsd/Documents/Projects/Adatar/sfDR/data-raw/remesas_provincias.R")
.res |>
left_join(dr_province, by = join_by(PROV_ID)) |>
left_join(remesas_provincias, by = join_by('PROV_NAME' == 'province'))
DR_PROV_SF |>
left_join(dr_province, by = join_by(PROV_ID)) |>
left_join(remesas_provincias, by = join_by('PROV_NAME' == 'province')) %>%
select(percetage) %>%
plot()
DR_PROV_SF |>
left_join(dr_province, by = join_by(PROV_ID)) |>
left_join(remesas_provincias, by = join_by('PROV_NAME' == 'province')) %>%
select(percentage) %>%
plot()
DR_PROV_SF %>%
sf::st_drop_geometry()
datos <- DR_PROV_SF |>
left_join(remesas_provincias, by = join_by('PROV_NAME' == 'province'))
DR_PROV_SF <- DR_PROV_SF |>
left_join(dr_province, by = join_by(PROV_ID))
DR_PROV_SF %>%
sf::st_drop_geometry()
datos <- DR_PROV_SF |>
left_join(remesas_provincias, by = join_by('PROV_NAME' == 'province'))
datos %>%
sf::st_drop_geometry()
datos |>
select(percentage) %>%
plot()
library(ggplot2)
library(ggplot2)
DR_PROV %>%
sf::st_as_sf() %>%
left_join(remesas_provincias, by = join_by('PROV_NAME' == 'province')) %>%
ggplot() +
geom_sf(aes(fill = percentage))
DR_PROV %>%
sf::st_as_sf() %>%
left_join(dr_province) %>%
left_join(remesas_provincias, by = join_by('PROV_NAME' == 'province')) %>%
ggplot() +
geom_sf(aes(fill = percentage))
DR_PROV %>%
sf::st_as_sf() %>%
left_join(dr_province) %>%
left_join(remesas_provincias, by = join_by('PROV_NAME' == 'province')) %>%
ggplot() +
geom_sf(aes(fill = percentage)) +
theme_void()
rmarkdown::render("README.Rmd")
rmarkdown::render("README.Rmd")
rmarkdown::render("README.Rmd")
